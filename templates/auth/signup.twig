{% extends 'layout.twig' %}

{% block title %}Sign Up - TicketFlow{% endblock %}

{% block content %}
<div class="container" style="padding-top: var(--space-2xl); padding-bottom: var(--space-2xl);">
    <div style="max-width: 480px; margin: 0 auto;">
        <div class="card" style="padding: var(--space-xl);">
            <h1 style="text-align: center; margin-bottom: var(--space-lg);">Create Account</h1>
            <p style="text-align: center; margin-bottom: var(--space-xl); color: var(--color-text-secondary);">
                Join us to start managing your tickets
            </p>

            {# Added form ID and data attributes for real-time validation #}
            <form id="signupForm" method="POST" action="/auth/signup" data-loading style="display: flex; flex-direction: column; gap: var(--space-lg);">
                <div>
                    <label for="name" style="display: block; margin-bottom: var(--space-sm); font-weight: 600; font-size: var(--font-size-sm);">
                        Full Name
                    </label>
                    <input id="name" type="text" name="name" value="{{ old.name|default('') }}" placeholder="John Doe" required autocomplete="name" aria-describedby="name-error">
                    {% if errors.name %}
                        <div class="error-message" style="display: flex; align-items: center; gap: var(--space-xs); margin-top: var(--space-xs); color: var(--leaf-rust); font-size: var(--font-size-sm);">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <span>{{ errors.name }}</span>
                        </div>
                    {% endif %}
                </div>

                <div>
                    <label for="email" style="display: block; margin-bottom: var(--space-sm); font-weight: 600; font-size: var(--font-size-sm);">
                        Email Address
                    </label>
                    <input id="email" type="email" name="email" value="{{ old.email|default('') }}" placeholder="you@example.com" required autocomplete="email" aria-describedby="email-error">
                    {% if errors.email %}
                        <div class="error-message" style="display: flex; align-items: center; gap: var(--space-xs); margin-top: var(--space-xs); color: var(--leaf-rust); font-size: var(--font-size-sm);">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <span>{{ errors.email }}</span>
                        </div>
                    {% endif %}
                </div>

                <div>
                    <label for="password" style="display: block; margin-bottom: var(--space-sm); font-weight: 600; font-size: var(--font-size-sm);">
                        Password
                    </label>
                    <input id="password" type="password" name="password" placeholder="••••••••" required autocomplete="new-password" minlength="6" aria-describedby="password-error">
                    {% if errors.password %}
                        <div class="error-message" style="display: flex; align-items: center; gap: var(--space-xs); margin-top: var(--space-xs); color: var(--leaf-rust); font-size: var(--font-size-sm);">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <span>{{ errors.password }}</span>
                        </div>
                    {% endif %}
                </div>

                <div>
                    <label for="confirmPassword" style="display: block; margin-bottom: var(--space-sm); font-weight: 600; font-size: var(--font-size-sm);">
                        Confirm Password
                    </label>
                    <input id="confirmPassword" type="password" name="confirmPassword" placeholder="••••••••" required autocomplete="new-password" minlength="6" aria-describedby="confirm-password-error">
                    {% if errors.confirmPassword %}
                        <div class="error-message" style="display: flex; align-items: center; gap: var(--space-xs); margin-top: var(--space-xs); color: var(--leaf-rust); font-size: var(--font-size-sm);">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <span>{{ errors.confirmPassword }}</span>
                        </div>
                    {% endif %}
                </div>

                {# Added loading state text #}
                <button type="submit" class="btn" data-loading-text="Creating account..." style="width: 100%;">Create Account</button>
            </form>

            <p style="text-align: center; margin-top: var(--space-lg); font-size: var(--font-size-sm);">
                Already have an account? 
                <a href="/auth/login" style="color: var(--accent-primary); font-weight: 600;">Sign in</a>
            </p>
        </div>
    </div>
</div>
{% endblock %}
